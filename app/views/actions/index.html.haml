:javascript
  Object.prototype.touch = function(func) {
    var target, func;
    if (window.Touch){
      this.addEventListener('touchstart', function(e){
        e.preventDefault();
        if (!e.touches || e.touches.length > 1) return;
        target = this;
        addClass(this, 'touched');
      }, false);
      window.addEventListener('touchend', function(e){
        if (target) removeClass(target, 'touched');
      });
      this.addEventListener('touchend', function(e){
        e.preventDefault();
        if (func) func.apply(this, [e]);
      }, false);
    } else {
      this.addEventListener('click', func);
    }
  }

  var addClass = function(element, className) {
    var re = new RegExp('(\\s|^)'+className+'(\\s|$)');
    if (re.test(element.className)) return;
    element.className += ' ' + className;
  }
  var removeClass = function(element, className) {
    var re = new RegExp('(\\s|^)'+className+'(\\s|$)');
    element.className = element.className.replace(re,' ');
  }

  $('.action').touch(function(e) {
      addClass($('.action'), 'touched');
    });

= content_for :header do
  = link_to @project.title, project_actions_path(@project), { class: 'brand' }

- unless @parent_action.nil?
  .page-header
    %h2= @parent_action.title
    %p= @parent_action.description

#actions
  - @actions.each do |action|
    .action.row-fluid
      .action_status
        = check_box_tag "action[#{action.id}]", 1, action.completed?
      = link_to (action.leaf? ? "#" : project_action_actions_path(@project, action)) do
        .action_info
          = label_tag "action[#{action.id}]", action.title
        - unless action.leaf?
          .action_details
            %i{class: "icon-chevron-right"}
      .description
        = action.description